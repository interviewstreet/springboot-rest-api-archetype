language: java
sudo: false

branches:
  only:
    - master

jdk:
  - oraclejdk8
  - oraclejdk11

install: mvn -B -V install -DskipUnitTests=true -DskipIntegrationTests=true
script: mvn -B -V verify -DskipIntegrationTests=false

after_success:
  - deploy/deploy.sh
  - source deploy/release.sh

cache:
  directories:
    - "~/.m2"

env:
  global:
    - secure: SOpFEXREjXbMhuJI7tcxyo1Pdmf5Jnl/xZbNO7TezE9oiYnDAKUHaKn/pQsqFLvgYehveksY3psVTFll7ag0PkOchq7U4JV7xPXv7LgtxzYeKccdMJZkUGpG5E6x9HP81li2kv9Tz5LAUcvmmAuM3OxLkdbi+ZfopAoBEZwKYgQCc39F6GinsuENNQ1DGMq15g2CMiDjhu/HkbFuhpniOm2OC6qbmRe3sg2PybgcKxPcyueLHqNd26eK2nY0uFu4S6tt/osW1lSq2da3lcpY7ttjhzoF4hWNOL1ICoRIPaqenZC99LA0wOa4amGhUsxIGp7kGr0ZGdvLIoSr6sK/J86bXbD2ylNGEd2v5o0lLJYgpybMeXh2tGfEqm4cms8gFePRM+7SMcRzfIw95vnuPKKQeJd9EIFgHZKVJxuyhMt9fJmaUM2+Pohf6cQwXtulQttrv/9OKjC1CzDw7k3ozakQphqMoPet4egxLEDeq5dp7BLw2exs2Oxm6DwME9vIICHIqw3qTQ0j/WjptFYtmbTKcNrY87+bDAHBkdpQAY9XJ4erZka9fNU+BkmUxAOt3ghpLTyypeAceNGS1Gdok9APACArPN75PPX/S+h9Efvk9V/9e/uOtg0HdgS2yW3LUHuVYC6pcB3aosk7FcRwLbfnI/OKgg0ifwuBqPGb2zw=
    - secure: K0Vq8U/81DZ0YwrD/i/HFr4auhvxuVHOyUvJHtavsVrAw0imaAGHm/e0nf95vQHKWsLFjc/Xm1YQQgSBQtJHhc/lkoZuaNSi3rkEz5auqe2AuPs/+j7yab4hyxsqcj/LX+W8SMf7mp0fwycxi9kG9VVDN8gwD6ZIPZR7nbEpNJIeePTDM9A4EB1NEmTdy/5pqlFxRoztSQ+HuA2Jnxd5Nvww7XNxdeTAXhpB10S13MCa5BKAFbHLRXSYJuF2BldEdwfIbHAIDhzBGXo25fN4KWtOni7AZISw7ULg56N80wgrmjzMLpuWwrAqc7cYX/uYIvoLDCq31NeloWeiSvrIUhPGpRHNxb2/yFY+nwW6yVdk8zP9EscETYpVQI2R4wWeDO0IjYQJ/CjX28EZH8JjFMATpRzPtGOXCa2pCegGbF5mE49Puy9mK5V4Me5vBzFpwi0UlJq88VrUL561DiGUB3DyCJ/L89PladCi2RS9RnQ5ZA/45oqQ2dAlgdQEM/BAvtQR/ui66y14wXhcP0Ohy8Iepqgkc3S0xqIlEWVxPsfBcXfcGTUTWqqeP5dkT0N29zCiCer4bkP3vfAEDGg/zdrLKy5P6rt4UDOxop+RBATwFrPYzt936auFwp0LWlOxwOGdxkucMuk7hdKPofXNTqwzp7nKXpbPszakuh5YFU4=
    - secure: O8XvQqWgaQqKDc3brZnaHbYiGbahAhcCjQ3IwjjBMt5TnCa+CJteII6kSzHOwM6lKB7xL+py1dDjid6mgSml13FSBMfoiTp50C9nXY0HhrZFgyFiT9+eWWxTG0Njg5WSsbxUShVq8hfzhiCoTAvwyWwv5qqv27h84IvJWfwQ2Ed6o0yvSx0PeHuVuyjWYI+tI/YmkWORU7A0wbhjDBncvwGUEIP+n6yScuKmZdCEVAF0Yoy8E+HU9dRC6eYd/cP2RnuSu1QrasPEJo4jHsyRD566SFd6/GmtzLqI9Kl9LIhQCdWJTDRFemzLgKJJoqdVLcR0Jq8PzYvV2m7PnRX1Cgtk6IH35AMv/2b6ceJXkUX4VPYZCsEQh9YSPiaKuSyFp2la3CpsQsFWG5osFoZdL4OB4+96zoQUDIp/cvBp+vLEJVjjmznzBNbcJXZbuH9byL3OD+XaZkqloKCha67bHIBnGCDADs1IxasLM58dIsb7RxV8fAUAdgCkK+vXlC1Iqq3hcHFjICZPm2on3vHgR5w5esPCs0+N9K2wreNctYkUGFeH/jNga7hMoHeX/CDzXAmrOqXeTjinO8gQSeBkQ25SwmAkFbHrIjg3Ud4nJ/m3/mahtBaeQzA3XELoM1dqnYln/3wh4AiTmV9JQj8IP91FtKraGp1jNT74ohLqqKI=
    - secure: FKLRF+d5KvNHOHtSMkZZHM9IAyeEiijUygN77Bejx++wIi5gNFTAPK1/Rz3SdXRuvK3EDCK0Edw0/bEc/Nh/c1JbQK/zMh7N1JnaIpt4ay6KM462Vtc03rAWRozGbKYMhuvLpGfjDjACXWZ9jNBBGAMCwO/DYjyPtKP8ciYPisEnQoRnt4MiWDgU59xNfsT0mmC2bSnBaVS2B8jYvwqfXeBJBljWfgYeqkuvi1xYIaLK3ONL5hNczhavD5Jh7YFnq4ogWTj6b1/mppaql4/3f0P0+FXJJQG1lRb7xcLN+UlJQkCwHAvw91p7Zzcgy6nniEFb8pnZTrC2mq2rkj5Zv2k+UOE8sqWFINHKILWRb6mcEY8ynEDeIytle7aLmChcATr2Zs5qtQeOLoQc7WlAtOKrs8912ekfn+SdCZ8vU3L3VBFlgiE6XDRAJDdOx7y5QfRopjdE9C1cPZ9e8UHdaWTBvc/1cDU15Hnj9ge7dpKM2n8mvs0g7eTCcgJfKR/9YzpcWW8UuspiAjDsM7UWdklBv7B2O8PNwxXCDcbuGU+MYVYP9i9RSBPfsm4WHPkRlvYTdi1hO7Eio8HfhJ6aXykRWlDdIptEmbq4W9/68XwJl1wd1C1C0PNSV9C7VcgHHZ7ipkSnhjsUjky5naANGIt3XQXf0790TvuFRTNVRvg=
    - secure: crbyAohATuKHVauF899N8LpeXyGeNG789XOZdGte0B0UULxIkKEe49wpAJCoDjYN7f8mp1ynVUwJIYmGUbEWf0Cm/Sk74gOqhH81ukkRzDrUU6B0oC7VkOs/9fpEjIIeH7iuhxJALPdCxWcPb/w0GkPoS0mOtuyr1y4s7WSG15Y4ScXKbUPeNjJ3l9X8pi6i7j3wljA8E5Y0mLf4xALKoajTuPyR5VgRngmpm0YAywlw2i3vZvCK8RNS6TWNZM2CmWksvRuJ1y/eQJ/raNRNP6JPImvWUUQr1pm4CMSP1vinc5vEnSjkABqiOKiP1kj208ABXA09tQLI3qAfVWtDPMsRnCmc1NBB5oElpVmkeOu7F5FOgGdYd6Gu+xuA0yNML/ejXWa0JeIauQWS51rv1cEnE4evUzJtFo9aeNfljGrf4TY8wh17aEf6ncRCW6IlVIRckiRJiZNift2Lcx0+7e7lVGBTotUYkSbCHDpMT5TOZ7QQIBXSv/jknKXhEk/fvax/VyhMR6ymKryL8OCyjR76XAbBNuiAeQRiL/xyQvIFWfcYNhHjiAFgEkq1BwbXImcome3Uth3b3fWGYzt2LjKO6ERBVghOcdx5uHHFO1hLqgX3r96pJsMeU/NInvYQiXVbTFcCxcp4MEKPZ84IMnjjoyeu4r0hxLPM+ML6L4Y=
    - secure: W++kq+mSDUe+WtOc/Hn88Q0GVbtR2K3nkAtT3On38C3DaWz5DOBLsZqT6OR86DvlBjXzQi4JUv9AjbOIZRJdKkRCaeqpcQUQhWb+/SDg5xUZc8DuobLQ/ZhspyywzIvLrB7SqGK4Ah0IUnDQ35FU/A7BkGLeonphkj5EAehYVQgKwKFWns2rdMtktHtCpBXaQ8rLSKZBC/Y7Efy09CZoR8K+VsmxUCanNSTNp/Lbh28Kh8k88zMp4YmaP+4PksSzLEyr6vDvR3efzvvtjCUkmCI3OeojS7ehLLhc7LYRGKgY1QDTj/qE+O6H2IzYq2i+XFY1BO76begi/8WctBv2DyatrD/P7je9a/6iDGixm/Yy/G8CHkCBjBxikrrBUhPPV+F043KUNVDd0fGkAws3rL2TyfYhVr3gnipy+TYww78IcW+wg92Z9fUFikPGDommWQWGhAI5q7aDUl2+Wlam0cbpAGZ2sOuTJrXS0t8w5G5cGgEaCM16oQVzmxZy94LPKwMAp9kZ8Lf//NNv1DLy+0ZQeYxMVokfERceqEw3a2cf9IuBng7zhNmFAaOYc553Gu4c7o5LgPeXC3sZM540wLTIBwEd4AQQGP6m6L7A1kCkbATSlXiYyQKHLd14nwkFdGF4wJH6kpwu/xXh3g6Ak3ooBcTPCfH/JBRY7kEMOT4=

deploy:
  provider: releases
  api_key:
    secure: CAQExMpDetiZVEJDH8jOqbFzaB1Rd298QJik1oN2BxnPT5sfqiNeT4fT0NAqKLbHUBjRhGjKuOrlJM1zPrLyPwlwa6YKIYPC+08RkRs8xXDpo8IwV05qYLzWq8qKwVIwh5ua8NdWEoX/RW8nftBjRI5LfRHFD2Mun2r4JOD8cLDYmN+/sm2MiCUGJELMPurUT0/j1ZsC2CM4/KnG6XDUSk+Xpq6jSl4e+vkOzvCm4b5j2xgoSE2uF2N9+RP+iUhy/YKnWN9ElHq3EPFQIjoZrsvDsfrydHXYX1MnUa90iWvch6pZnU2qXNBvcNGQr9a2GZBS/xWFNQ8bP02nd6dDPoLTQvcroC75pWjY2ZrSENq9kIiVs4g7XxdFS+x36RSRkiQzrV7EN5kV7i2v1hXKMXh3Q4O9f2cxUwySTNC6FFNd0PKynvkv7nOYQaLHLDZMB0VydSJ6KZr9P25UhieOEOj2zaLqcqq6YGq2Q6GpFrm2YtiYW8ZBeCQjdQc7PbZMnmg0Z3SnGsge9IGgKyO7uJO+hTEnnOSV5OdJvWEMoFJvA25K4rWvg48Pfg4PrmUyVA0MuGWxgTCaZxunX/TItAjOPZ8YaBny9mpjfu8gCx1C5G+ptgkhWlQU4s0xOqgq5ypiqG8h3LEa7VGx1ohHMVv3CWHXHTT8iucIHWGz2Gs=
  name: v${PROJECT_VERSION}
  file:
    - target/springboot-rest-api-${PROJECT_VERSION}.jar
    - target/springboot-rest-api-${PROJECT_VERSION}-sources.jar
  skip_cleanup: true
  on:
    condition: "${GITHUB_RELEASE} = true"
